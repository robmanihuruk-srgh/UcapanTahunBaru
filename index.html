<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>ðŸŽ† Tahun Baru Fantasi Robert Dan Keluarga </title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'Poppins', sans-serif;
      background: radial-gradient(circle at top, #091833, #000814);
      color: #fff;
      overflow: hidden;
    }

    canvas#fireworks { position: fixed; inset: 0; z-index: 0; }

    .hero {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      position: relative;
      z-index: 2;
    }

    .card {
      max-width: 960px;
      width: 100%;
      background: rgba(255,255,255,0.1);
      backdrop-filter: blur(18px);
      border-radius: 30px;
      overflow: hidden;
      box-shadow: 0 40px 120px rgba(0,0,0,.7);
      animation: fadeIn 1.6s ease forwards;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(40px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .photo{ width:100%; aspect-ratio:16/10; overflow:hidden; }
    .small-photo{ max-height:320px; margin:0 auto; }
    .photo img{ width:100%; height:100%; object-fit:cover; object-position:center; }

    .content{ padding:32px 26px 40px; text-align:center; }

    h1{
      font-family:'Playfair Display',serif;
      font-size:clamp(30px,7vw,48px);
      margin:10px 0;
    }
    h1 span{ color:#ffd166; text-shadow:0 0 18px rgba(255,209,102,.6); }

    .verse{ margin-top:18px; font-size:15px; line-height:1.8; max-width:520px; margin:auto; }
    .signature{ margin-top:22px; font-weight:600; color:#ffd166; }

    .controls{ position:fixed; top:14px; right:14px; display:flex; gap:10px; z-index:5 }
    .btn{ background:rgba(255,255,255,.18); border:1px solid rgba(255,255,255,.25); color:#fff; padding:10px 14px; border-radius:14px; cursor:pointer }
    .btn:active{ transform:scale(.96) }

    .tap{ position:absolute; bottom:16px; width:100%; text-align:center; font-size:12px; opacity:.7 }

    @media (max-width:480px){ .photo{aspect-ratio:4/5; max-height:260px} }
    @media (min-width:481px) and (max-width:768px){ .photo{aspect-ratio:3/4; max-height:300px} }
    @media (min-width:769px) and (max-width:1024px){ .photo{aspect-ratio:16/9; max-height:340px} }
    @media (min-width:1025px){ .photo{aspect-ratio:21/9; max-height:380px} }
  </style>
</head>
<body>

<audio id="music" loop>
  <source src="https://cdn.pixabay.com/audio/2022/12/06/audio_6e7a8d8b88.mp3" type="audio/mpeg">
</audio>

<canvas id="fireworks"></canvas>

<div class="controls">
  <button class="btn" id="shareBtn">ðŸ“¤ Bagikan</button>
</div>

<section class="hero">
  <div class="card">
    <div class="photo small-photo"><img src="faminbali.jfif" alt="Keluarga" /></div>
    <div class="content">
      <h1>Selamat Tahun Baru <span>2026</span></h1>
      <div class="verse" id="verse"></div>
      <div class="signature" id="sign">â€” Keluarga</div>
    </div>
  </div>
  <div class="tap">ðŸ‘† Ketuk layar untuk musik & kembang api</div>
</section>

<script>
// === Typewriter Ayat ===
const text = "TUHAN memberkati engkau dan melindungi engkau; TUHAN menyinari engkau dengan wajah-Nya dan memberi engkau kasih karunia.";
let idx = 0;
const verseEl = document.getElementById('verse');
(function type(){
  if(idx < text.length){
    verseEl.textContent += text[idx++];
    setTimeout(type,40);
  }
})();

// === Music autoplay via user gesture ===
document.body.addEventListener('click',()=>{
  document.getElementById('music').play().catch(()=>{});
},{once:true});

// === Fireworks (safe loop) ===
const canvas = document.getElementById('fireworks');
const ctx = canvas.getContext('2d');
function resize(){ canvas.width=innerWidth; canvas.height=innerHeight; }
window.addEventListener('resize',resize);
resize();
setInterval(()=>{
  const x=Math.random()*canvas.width;
  const y=Math.random()*canvas.height/2;
  for(let i=0;i<25;i++){
    const a=Math.random()*Math.PI*2;
    const s=Math.random()*4+1;
    let life=50;
    const vx=Math.cos(a)*s;
    const vy=Math.sin(a)*s;
    const t=setInterval(()=>{
      ctx.fillStyle='rgba(255,209,102,.8)';
      ctx.fillRect(x+vx*life,y+vy*life,3,3);
      if(--life<=0) clearInterval(t);
    },16);
  }
},1000);

// === Locked View (Read-only) ===
// Nama keluarga dikunci agar penerima tidak bisa mengedit
const FAMILY_NAME = 'Keluarga';
document.getElementById('sign').innerText = 'â€” ' + FAMILY_NAME;

// === SAFE SHARE (fix NotAllowedError) ===
document.getElementById('shareBtn').addEventListener('click', async () => {
  try{
    if(navigator.share && location.protocol === 'https:'){
      await navigator.share({
        title:'Selamat Tahun Baru 2026',
        text:'Ucapan Tahun Baru interaktif âœ¨',
        url: location.href
      });
    } else {
      await navigator.clipboard.writeText(location.href);
      alert('Link disalin. Bagikan ke WhatsApp atau media lain.');
    }
  } catch(err){
    await navigator.clipboard.writeText(location.href);
    alert('Izin berbagi diblokir. Link telah disalin.');
  }
});
</script>

</body>
</html>
